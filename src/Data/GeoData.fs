module GeoData

open Geojson
open Fable.Core
open Fable.Core.JsInterop
open System

let get (type': Type, string) =
    let geometry = type'
    let subtypes: obj[] = geometry?generics
    match subtypes[0]?fullname with
    | "Geojson.LineString" -> string |> JS.JSON.parse :?> FeatureCollection<LineString, obj> |> TurfJS.first 
    | "Geojson.Polygon" -> string |> JS.JSON.parse :?> FeatureCollection<Polygon, obj> |> TurfJS.first |> TurfJS.polygonToLine
    |  other -> failwith $"Not supported geometry: {other}. Use either single LineString or Polygon"

let monaco = 7.421275981288801,43.73500178756842

let monteCarloF1 = typeof<FeatureCollection<LineString,_>>, """{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
          [
            7.421250861866866,
            43.734978853050194
          ],
          [
            7.4211999972216915,
            43.735411708455615
          ],
          [
            7.421222603730115,
            43.7359915664544
          ],
          [
            7.421256513493944,
            43.736191656996056
          ],
          [
            7.42133563627587,
            43.7364244145395
          ],
          [
            7.421435236302898,
            43.73663710021927
          ],
          [
            7.421442664527916,
            43.736733707582886
          ],
          [
            7.421427808077766,
            43.73689471951013
          ],
          [
            7.4214686633164035,
            43.73694570652981
          ],
          [
            7.42158008669557,
            43.73697790883614
          ],
          [
            7.4217769346654165,
            43.73701279464834
          ],
          [
            7.421955212071708,
            43.7370154781714
          ],
          [
            7.422586611219742,
            43.73707451565056
          ],
          [
            7.423041296749602,
            43.73713808529351
          ],
          [
            7.423694980573629,
            43.73728567857978
          ],
          [
            7.424162958765436,
            43.737374234376716
          ],
          [
            7.424612366394598,
            43.73742790449333
          ],
          [
            7.4248649260531465,
            43.73744132201449
          ],
          [
            7.42511100654113,
            43.737497966801016
          ],
          [
            7.426020964137081,
            43.73780120170011
          ],
          [
            7.4264332306392475,
            43.73786828885949
          ],
          [
            7.42712776970194,
            43.73794074290706
          ],
          [
            7.42730613320316,
            43.73798911109503
          ],
          [
            7.427517837623867,
            43.738088399753025
          ],
          [
            7.427718399706208,
            43.738244041101865
          ],
          [
            7.427829823084551,
            43.73836211357869
          ],
          [
            7.4278781065490875,
            43.73849360310933
          ],
          [
            7.4278706783240125,
            43.7386438765044
          ],
          [
            7.42783725131045,
            43.73875926474798
          ],
          [
            7.42777188258637,
            43.73889714296885
          ],
          [
            7.427679029770701,
            43.739039365054765
          ],
          [
            7.427523037039521,
            43.739109134256125
          ],
          [
            7.427251906817503,
            43.73929697401016
          ],
          [
            7.427185052789497,
            43.73940967757946
          ],
          [
            7.427166482226909,
            43.739495546823974
          ],
          [
            7.427198864290887,
            43.73957037827864
          ],
          [
            7.42726571831804,
            43.739680397930414
          ],
          [
            7.427343714683616,
            43.73977968378321
          ],
          [
            7.4287028361434295,
            43.74108991984434
          ],
          [
            7.428814259522596,
            43.74111138656443
          ],
          [
            7.428955395802774,
            43.74108991984434
          ],
          [
            7.429044534505977,
            43.7410282029812
          ],
          [
            7.429126244984104,
            43.74093696924052
          ],
          [
            7.429137387321674,
            43.740700834208525
          ],
          [
            7.429233954250719,
            43.7405720328895
          ],
          [
            7.4294010893185884,
            43.740400297366335
          ],
          [
            7.429464229234071,
            43.74031174604417
          ],
          [
            7.429491199042275,
            43.74025278413697
          ],
          [
            7.429535768394288,
            43.74020985007343
          ],
          [
            7.429598908308947,
            43.740199116553015
          ],
          [
            7.429673190561175,
            43.74021521683355
          ],
          [
            7.429736330475748,
            43.740263517648344
          ],
          [
            7.429747472814228,
            43.74031986855013
          ],
          [
            7.429710331688085,
            43.74037621939826
          ],
          [
            7.429624907097406,
            43.740421836712926
          ],
          [
            7.4293352063119755,
            43.74068212307961
          ],
          [
            7.429290636959962,
            43.7407438402995
          ],
          [
            7.429286922847439,
            43.74080287410254
          ],
          [
            7.429342634537022,
            43.74089142469771
          ],
          [
            7.429498549739492,
            43.74094549725797
          ],
          [
            7.42967311303326,
            43.74098038075857
          ],
          [
            7.430063094860344,
            43.74108771447834
          ],
          [
            7.430237658154141,
            43.741090397818766
          ],
          [
            7.430330510969782,
            43.74105551438231
          ],
          [
            7.430360223870878,
            43.74095623064454
          ],
          [
            7.430330510969782,
            43.740384675115706
          ],
          [
            7.43025933538317,
            43.74003362421567
          ],
          [
            7.430196195468511,
            43.739714300211546
          ],
          [
            7.430032774512313,
            43.73928227090795
          ],
          [
            7.429912564788964,
            43.73906587988432
          ],
          [
            7.42967486158048,
            43.738749234164885
          ],
          [
            7.4293549168170046,
            43.738477448129515
          ],
          [
            7.428964934989921,
            43.73815811582588
          ],
          [
            7.428366881296171,
            43.737895135803285
          ],
          [
            7.427323215645117,
            43.73753018091105
          ],
          [
            7.426841469359005,
            43.73741889265378
          ],
          [
            7.426146930296284,
            43.73729813480608
          ],
          [
            7.425478390022192,
            43.737217629439584
          ],
          [
            7.425444963007749,
            43.737172009683064
          ],
          [
            7.425433820670179,
            43.73708613710696
          ],
          [
            7.425411535994158,
            43.73702709963928
          ],
          [
            7.425303826727543,
            43.73700026440767
          ],
          [
            7.425155262222233,
            43.73698953031189
          ],
          [
            7.425006697716981,
            43.737051251337476
          ],
          [
            7.424895274337871,
            43.73705661838068
          ],
          [
            7.423467932694706,
            43.73691281771218
          ],
          [
            7.422252645030198,
            43.73678055418466
          ],
          [
            7.422163506327024,
            43.736729567024355
          ],
          [
            7.422027439077112,
            43.73651278092035
          ],
          [
            7.421893731021925,
            43.736268577770886
          ],
          [
            7.421849161669968,
            43.73612098197705
          ],
          [
            7.4218008782062554,
            43.73590629653762
          ],
          [
            7.421810871897804,
            43.7354937496728
          ],
          [
            7.421840584798815,
            43.73543739422891
          ],
          [
            7.421922295276971,
            43.735364937151644
          ],
          [
            7.422174854936316,
            43.73521733913111
          ],
          [
            7.422219424288329,
            43.735136830966496
          ],
          [
            7.422366605187079,
            43.734488717509436
          ],
          [
            7.422466886228619,
            43.734123741856195
          ],
          [
            7.4224605505318095,
            43.73406462354919
          ],
          [
            7.422412267067216,
            43.73402973601941
          ],
          [
            7.422334270702578,
            43.733970695539
          ],
          [
            7.422222847323411,
            43.73394385893769
          ],
          [
            7.422196848534895,
            43.73388750203523
          ],
          [
            7.422219133210888,
            43.733769420735086
          ],
          [
            7.422430834820517,
            43.73337784976954
          ],
          [
            7.422568256988171,
            43.733200726223714
          ],
          [
            7.4227205356059756,
            43.733042388065655
          ],
          [
            7.422947096476776,
            43.7328679472366
          ],
          [
            7.423262796050835,
            43.73275523135425
          ],
          [
            7.423389075880095,
            43.732714975630444
          ],
          [
            7.423441073457155,
            43.73268008731441
          ],
          [
            7.423489356921692,
            43.732564687356046
          ],
          [
            7.423476590144219,
            43.732496330296755
          ],
          [
            7.423380023216055,
            43.73246680930731
          ],
          [
            7.423034610740984,
            43.73239166490623
          ],
          [
            7.422793193419125,
            43.732367511328675
          ],
          [
            7.4226446289139005,
            43.732367511328675
          ],
          [
            7.422540633760633,
            43.732375562522094
          ],
          [
            7.422421782156476,
            43.73245339067151
          ],
          [
            7.42240403823925,
            43.732591131847585
          ],
          [
            7.422363183000613,
            43.732677010869764
          ],
          [
            7.422170049143347,
            43.73285145225435
          ],
          [
            7.421880751695426,
            43.73318916269065
          ],
          [
            7.421747043641119,
            43.733428011031464
          ],
          [
            7.421390488872845,
            43.73438071134899
          ],
          [
            7.421253067196943,
            43.73496842622254
          ]
        ],
        "type": "LineString"
      }
    }
  ]
}"""
